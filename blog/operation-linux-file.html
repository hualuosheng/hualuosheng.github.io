<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Linux 替换文件内容命令 | Luosheng&#39;s Blog</title>
    <meta name="description" content="">
    <meta name="generator" content="VuePress 1.4.0">
    <link rel="icon" href="/ban.jpg">
    
    <link rel="preload" href="/assets/css/0.styles.0d6e16f6.css" as="style"><link rel="preload" href="/assets/js/app.0803f1dc.js" as="script"><link rel="preload" href="/assets/js/2.ba121914.js" as="script"><link rel="preload" href="/assets/js/66.1d715382.js" as="script"><link rel="preload" href="/assets/js/3.acf85aa2.js" as="script"><link rel="prefetch" href="/assets/js/10.8be03967.js"><link rel="prefetch" href="/assets/js/11.24237a4a.js"><link rel="prefetch" href="/assets/js/12.b486f0e8.js"><link rel="prefetch" href="/assets/js/13.098d7444.js"><link rel="prefetch" href="/assets/js/14.401e951f.js"><link rel="prefetch" href="/assets/js/15.f872da64.js"><link rel="prefetch" href="/assets/js/16.9f36a932.js"><link rel="prefetch" href="/assets/js/17.89c87ecc.js"><link rel="prefetch" href="/assets/js/18.7772cad0.js"><link rel="prefetch" href="/assets/js/19.db9dcf7a.js"><link rel="prefetch" href="/assets/js/20.647baa4f.js"><link rel="prefetch" href="/assets/js/21.aededf0a.js"><link rel="prefetch" href="/assets/js/22.cf7f8218.js"><link rel="prefetch" href="/assets/js/23.67055082.js"><link rel="prefetch" href="/assets/js/24.52b0f502.js"><link rel="prefetch" href="/assets/js/25.4b25718b.js"><link rel="prefetch" href="/assets/js/26.45171d8b.js"><link rel="prefetch" href="/assets/js/27.ca2ee0fb.js"><link rel="prefetch" href="/assets/js/28.0bff638e.js"><link rel="prefetch" href="/assets/js/29.fda3e544.js"><link rel="prefetch" href="/assets/js/30.d495373b.js"><link rel="prefetch" href="/assets/js/31.b14f5288.js"><link rel="prefetch" href="/assets/js/32.77d1d5cc.js"><link rel="prefetch" href="/assets/js/33.63854f03.js"><link rel="prefetch" href="/assets/js/34.01c09498.js"><link rel="prefetch" href="/assets/js/35.6ecd8fd7.js"><link rel="prefetch" href="/assets/js/36.6e09c81e.js"><link rel="prefetch" href="/assets/js/37.9638ec93.js"><link rel="prefetch" href="/assets/js/38.c6f8bfa9.js"><link rel="prefetch" href="/assets/js/39.9ca1d508.js"><link rel="prefetch" href="/assets/js/4.a58dcc0b.js"><link rel="prefetch" href="/assets/js/40.62a1dc9b.js"><link rel="prefetch" href="/assets/js/41.b518782e.js"><link rel="prefetch" href="/assets/js/42.989782da.js"><link rel="prefetch" href="/assets/js/43.0dd34d8f.js"><link rel="prefetch" href="/assets/js/44.729f16d2.js"><link rel="prefetch" href="/assets/js/45.fa3ca8f7.js"><link rel="prefetch" href="/assets/js/46.e56e89ec.js"><link rel="prefetch" href="/assets/js/47.a86b04c2.js"><link rel="prefetch" href="/assets/js/48.7819453a.js"><link rel="prefetch" href="/assets/js/49.ac397ab8.js"><link rel="prefetch" href="/assets/js/5.67fa2f61.js"><link rel="prefetch" href="/assets/js/50.4722f6fd.js"><link rel="prefetch" href="/assets/js/51.1493ca38.js"><link rel="prefetch" href="/assets/js/52.a4732409.js"><link rel="prefetch" href="/assets/js/53.23103a3a.js"><link rel="prefetch" href="/assets/js/54.8fb66cb7.js"><link rel="prefetch" href="/assets/js/55.d7622a70.js"><link rel="prefetch" href="/assets/js/56.5808985a.js"><link rel="prefetch" href="/assets/js/57.80145c07.js"><link rel="prefetch" href="/assets/js/58.6130dc53.js"><link rel="prefetch" href="/assets/js/59.118e5271.js"><link rel="prefetch" href="/assets/js/6.2a3c451f.js"><link rel="prefetch" href="/assets/js/60.008145d3.js"><link rel="prefetch" href="/assets/js/61.b8f3128a.js"><link rel="prefetch" href="/assets/js/62.c95519e0.js"><link rel="prefetch" href="/assets/js/63.c8db1cbd.js"><link rel="prefetch" href="/assets/js/64.feeacc70.js"><link rel="prefetch" href="/assets/js/65.a1684819.js"><link rel="prefetch" href="/assets/js/67.48eb9607.js"><link rel="prefetch" href="/assets/js/68.5a55e535.js"><link rel="prefetch" href="/assets/js/69.06411091.js"><link rel="prefetch" href="/assets/js/7.d93fe3dd.js"><link rel="prefetch" href="/assets/js/70.e0906bce.js"><link rel="prefetch" href="/assets/js/71.d01d10a4.js"><link rel="prefetch" href="/assets/js/72.844c1304.js"><link rel="prefetch" href="/assets/js/73.74423198.js"><link rel="prefetch" href="/assets/js/74.d64ab7bd.js"><link rel="prefetch" href="/assets/js/75.b9c6b0bc.js"><link rel="prefetch" href="/assets/js/76.b30fa79d.js"><link rel="prefetch" href="/assets/js/77.d9d89781.js"><link rel="prefetch" href="/assets/js/78.e724dbe2.js"><link rel="prefetch" href="/assets/js/79.c1835839.js"><link rel="prefetch" href="/assets/js/8.3e6884dd.js"><link rel="prefetch" href="/assets/js/80.a71b2868.js"><link rel="prefetch" href="/assets/js/81.7c006b58.js"><link rel="prefetch" href="/assets/js/82.a552f6f0.js"><link rel="prefetch" href="/assets/js/83.f0ca1969.js"><link rel="prefetch" href="/assets/js/84.8237d1fa.js"><link rel="prefetch" href="/assets/js/85.d4a07e33.js"><link rel="prefetch" href="/assets/js/86.fd27856b.js"><link rel="prefetch" href="/assets/js/9.59effbf0.js">
    <link rel="stylesheet" href="/assets/css/0.styles.0d6e16f6.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/ban.jpg" alt="Luosheng's Blog" class="logo"> <span class="site-name can-hide">Luosheng's Blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/" class="nav-link router-link-active">
  博客
</a></div><div class="nav-item"><a href="/Iq/" class="nav-link">
  面试题
</a></div><div class="nav-item"><a href="/book/" class="nav-link">
  阅读
</a></div> <a href="https://github.com/hualuosheng.github.io" target="_blank" rel="noopener noreferrer" class="repo-link">
    My GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog/" class="nav-link router-link-active">
  博客
</a></div><div class="nav-item"><a href="/Iq/" class="nav-link">
  面试题
</a></div><div class="nav-item"><a href="/book/" class="nav-link">
  阅读
</a></div> <a href="https://github.com/hualuosheng.github.io" target="_blank" rel="noopener noreferrer" class="repo-link">
    My GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>CSS</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/css.html" class="sidebar-link">CSS 使用总结</a></li><li><a href="/blog/css-modules.html" class="sidebar-link">CSS 模块化</a></li><li><a href="/blog/css-next.html" class="sidebar-link">CSS NEXT 语法</a></li><li><a href="/blog/css-flex.html" class="sidebar-link">CSS Flex 布局总结</a></li><li><a href="/blog/css-useful.html" class="sidebar-link">CSS 有趣的特性</a></li><li><a href="/blog/css-devicePixelRatio.html" class="sidebar-link">CSS 设备像素比</a></li><li><a href="/blog/css-houdini-star.html" class="sidebar-link">CSS 发展</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>JS 基础</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>网络协议</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>框架</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>编程基础</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>其它</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="linux-替换文件内容命令"><a href="#linux-替换文件内容命令" class="header-anchor">#</a> Linux 替换文件内容命令</h1> <p>在 linux 中，我们可以通过以下两个命令去操作文件中的内容。</p> <ul><li>sed 命令</li> <li>awk 命令</li> <li>cut 命令</li></ul> <h2 id="sed-命令"><a href="#sed-命令" class="header-anchor">#</a> sed 命令</h2> <p>sed 是一种流编辑器，它是文本处理中非常重要的工具，能够完美的配合正则表达式使用，以实现操作文件内容的效果。</p> <p>sed 命令在处理时，会把当前处理的行存储在临时缓冲区中，称为“模式空间”（pattern space），接着去处理缓冲区中的内容，处理完成后，把缓冲区的内容送往屏幕。接着处理下一行，这样不断重复，直到文件末尾。原始文件内容并没有改变，除非你使用重定向存储输出。</p> <p>sed 命令的主要用途：</p> <ul><li>自动编辑一个或多个文件</li> <li>简化对文件的反复操作</li> <li>编写转换程序</li></ul> <p>命令规范</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token comment"># 直接在命令行编写操作，并执行</span>
<span class="token function">sed</span> <span class="token operator">&lt;</span>option<span class="token operator">&gt;</span> <span class="token string">'command 正则'</span> <span class="token function">file</span>

<span class="token comment"># 将操作写在一个单独的文件里，进行执行</span>
<span class="token function">sed</span> <span class="token punctuation">[</span>options<span class="token punctuation">]</span> -f scriptfile file<span class="token punctuation">(</span>s<span class="token punctuation">)</span>
</code></pre></div><h3 id="sed-命令实战"><a href="#sed-命令实战" class="header-anchor">#</a> sed 命令实战</h3> <h4 id="替换操作：s-命令"><a href="#替换操作：s-命令" class="header-anchor">#</a> 替换操作：s 命令</h4> <p>1、替换文本中的字符串：</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">sed</span> <span class="token string">'s/books/BOOKS/'</span> ./test.js
</code></pre></div><p>2、直接编辑文件 选项-i ，会匹配 file 文件中每一行的所有 book 替换为 books：</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">sed</span> -i <span class="token string">'s/book/books/g'</span> <span class="token function">file</span>
</code></pre></div><h4 id="全面替换标记-g"><a href="#全面替换标记-g" class="header-anchor">#</a> 全面替换标记 g</h4> <p>使用后缀 /g 标记会替换每一行中的所有匹配：</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">sed</span> <span class="token string">'s/book/books/g'</span> <span class="token function">file</span>
</code></pre></div><p>当需要从第 N 处匹配开始替换时，可以使用 /Ng：</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token builtin class-name">echo</span> sksksksksksk <span class="token operator">|</span> <span class="token function">sed</span> <span class="token string">'s/sk/SK/2g'</span>
skSKSKSKSKSK

<span class="token builtin class-name">echo</span> sksksksksksk <span class="token operator">|</span> <span class="token function">sed</span> <span class="token string">'s/sk/SK/3g'</span>
skskSKSKSKSK

<span class="token builtin class-name">echo</span> sksksksksksk <span class="token operator">|</span> <span class="token function">sed</span> <span class="token string">'s/sk/SK/4g'</span>
skskskSKSKSK
</code></pre></div><h4 id="定界符"><a href="#定界符" class="header-anchor">#</a> 定界符</h4> <p>以上命令中字符 / 在 sed 中作为定界符使用，也可以使用任意的定界符：</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">sed</span> <span class="token string">'s:test:TEXT:g'</span>
<span class="token function">sed</span> <span class="token string">'s|test|TEXT|g'</span>
</code></pre></div><p>定界符出现在样式内部时，需要进行转义：</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">sed</span> <span class="token string">'s/\/bin/\/usr\/local\/bin/g'</span>
</code></pre></div><h4 id="删除操作：d-命令"><a href="#删除操作：d-命令" class="header-anchor">#</a> 删除操作：d 命令</h4> <p>删除空白行：</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">sed</span> <span class="token string">'/^$/d'</span> <span class="token function">file</span>
</code></pre></div><p>删除文件的第 2 行：</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">sed</span> <span class="token string">'2d'</span> <span class="token function">file</span>
</code></pre></div><p>删除文件的第 2 行到末尾所有行：</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">sed</span> <span class="token string">'2,<span class="token variable">$d</span>'</span> <span class="token function">file</span>
</code></pre></div><p>删除文件最后一行：</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">sed</span> <span class="token string">'<span class="token variable">$d</span>'</span> <span class="token function">file</span>
</code></pre></div><p>删除文件中所有开头是 test 的行：</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">sed</span> <span class="token string">'/^test/'</span>d <span class="token function">file</span>
</code></pre></div><h4 id="已匹配字符串标记"><a href="#已匹配字符串标记" class="header-anchor">#</a> 已匹配字符串标记&amp;</h4> <p>正则表达式 \w+ 匹配每一个单词，使用 [&amp;] 替换它，&amp; 对应于之前所匹配到的单词：</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token builtin class-name">echo</span> this is a <span class="token builtin class-name">test</span> line <span class="token operator">|</span> <span class="token function">sed</span> <span class="token string">'s/\w\+/[&amp;]/g'</span>
<span class="token punctuation">[</span>this<span class="token punctuation">]</span> <span class="token punctuation">[</span>is<span class="token punctuation">]</span> <span class="token punctuation">[</span>a<span class="token punctuation">]</span> <span class="token punctuation">[</span>test<span class="token punctuation">]</span> <span class="token punctuation">[</span>line<span class="token punctuation">]</span>
</code></pre></div><p>所有以 192.168.0.1 开头的行都会被替换成它自已加 localhost：</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">sed</span> <span class="token string">'s/^192.168.0.1/&amp;localhost/'</span> <span class="token function">file</span>
<span class="token number">192.168</span>.0.1localhost
</code></pre></div><h4 id="子串匹配标记-1"><a href="#子串匹配标记-1" class="header-anchor">#</a> 子串匹配标记\1</h4> <p>匹配给定样式的其中一部分：</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token builtin class-name">echo</span> this is digit <span class="token number">7</span> <span class="token keyword">in</span> a number <span class="token operator">|</span> <span class="token function">sed</span> <span class="token string">'s/digit \([0-9]\)/<span class="token entity" title="\1">\1</span>/'</span>
this is <span class="token number">7</span> <span class="token keyword">in</span> a number
</code></pre></div><p>命令中 digit 7，被替换成了 7。样式匹配到的子串是 7，(..) 用于匹配子串，对于匹配到的第一个子串就标记为 \1 ，依此类推匹配到的第二个结果就是 \2 ，例如：</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token builtin class-name">echo</span> aaa BBB <span class="token operator">|</span> <span class="token function">sed</span> <span class="token string">'s/\([a-z]\+\) \([A-Z]\+\)/<span class="token entity" title="\2">\2</span> <span class="token entity" title="\1">\1</span>/'</span>
BBB aaa
</code></pre></div><p>love 被标记为 1，所有 loveable 会被替换成 lovers，并打印出来：</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token builtin class-name">echo</span> loveable <span class="token operator">|</span> <span class="token function">sed</span> -n <span class="token string">'s/\(love\)able/<span class="token entity" title="\1">\1</span>rs/p'</span>
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">总结</p> <p>sed 命令主要是通过正则表达式的方法去操作一个文件内容，首先定义一个正则表达式模式，然后使用对应的操作符去操作正则匹配到的内容，最终输出到控制台。</p></div> <h2 id="awk-命令"><a href="#awk-命令" class="header-anchor">#</a> awk 命令</h2> <p>awk 是一种编程语言，用于在 linux/unix 下对文本和数据进行处理。数据可以来自标准输入(stdin)、一个或多个文件，或其它命令的输出。它支持用户自定义函数和动态正则表达式等先进功能，是 linux/unix 下的一个强大编程工具。</p> <p>awk 有很多内建的功能，比如数组、函数等，这是它和 C 语言的相同之处，灵活性是 awk 最大的优势。</p> <p>命令规范</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token comment"># 基本用法</span>
<span class="token function">awk</span> <span class="token string">'script'</span> files
<span class="token builtin class-name">echo</span> <span class="token string">'wenjian neirong'</span> <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'script'</span>

<span class="token comment"># 直接在命令行编写操作，并执行</span>
<span class="token function">awk</span> <span class="token punctuation">[</span>options<span class="token punctuation">]</span> <span class="token string">'script'</span> file<span class="token punctuation">(</span>s<span class="token punctuation">)</span>

<span class="token comment"># 将操作写在一个单独的文件里，进行执行</span>
<span class="token function">awk</span> <span class="token punctuation">[</span>options<span class="token punctuation">]</span> -f scriptfile file<span class="token punctuation">(</span>s<span class="token punctuation">)</span>
</code></pre></div><p>常用命令选项</p> <ul><li>-F fs fs 指定输入分隔符，fs 可以是字符串或正则表达式，如-F:</li> <li>-v var=value 赋值一个用户定义变量，将外部变量传递给 awk</li> <li>-f scripfile 从脚本文件中读取 awk 命令</li></ul> <h3 id="awk-基本用法"><a href="#awk-基本用法" class="header-anchor">#</a> awk 基本用法</h3> <p>awk 在运行时包含三个步骤，写法如下：</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">awk</span> <span class="token string">'BEGIN{ commands } pattern{ commands } END{ commands }'</span>
</code></pre></div><ul><li>第一步：执行 BEGIN{ commands }语句块中的语句。</li> <li>第二步：从文件或标准输入(stdin)读取一行，然后执行 pattern{ commands }语句块，它逐行扫描文件，从第一行到最后一行重复这个过程，直到文件全部被读取完毕。</li> <li>第三步：当读至输入流末尾时，执行 END{ commands }语句块。</li></ul> <p>BEGIN 语句块 在 awk 开始从输入流中读取行之前被执行，这是一个可选的语句块，如：变量初始化、打印输出表格的表头等语句通常可以写在 BEGIN 语句块中。</p> <p>END 语句块 在 awk 从输入流中读取完所有的行之后即被执行，如：打印所有行的分析结果这类信息汇总都是在 END 语句块中完成，它也是一个可选语句块。</p> <p>pattern 语句块 中的通用命令是最重要的部分，它也是可选的。如果没有提供 pattern 语句块，则默认执行{ print }，即打印每一个读取到的行，awk 读取的每一行都会执行该语句块。</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token builtin class-name">echo</span> -e <span class="token string">&quot;A line 1<span class="token entity" title="\n">\n</span>A line 2&quot;</span> <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'BEGIN{ print &quot;Start&quot; } { print } END{ print &quot;End&quot; }'</span>
Start
A line <span class="token number">1</span>
A line <span class="token number">2</span>
End
</code></pre></div><h3 id="awk-内置变量"><a href="#awk-内置变量" class="header-anchor">#</a> awk 内置变量</h3> <p>awk 命令除了运行步骤之外，还包括以下内置变量，方便我们在代码中进行引用。</p> <div class="language-sh extra-class"><pre class="language-sh"><code>**<span class="token variable">$n</span>**  当前记录的第n个字段，比如n为1表示第一个字段，n为2表示第二个字段。
**<span class="token variable">$0</span>**  这个变量包含执行过程中当前行的文本内容。
<span class="token punctuation">[</span>N<span class="token punctuation">]</span>  **ARGC**  命令行参数的数目。
<span class="token punctuation">[</span>G<span class="token punctuation">]</span>  **ARGIND**  命令行中当前文件的位置（从0开始算）。
<span class="token punctuation">[</span>N<span class="token punctuation">]</span>  **ARGV**  包含命令行参数的数组。
<span class="token punctuation">[</span>G<span class="token punctuation">]</span>  **CONVFMT**  数字转换格式（默认值为%.6g）。
<span class="token punctuation">[</span>P<span class="token punctuation">]</span>  **ENVIRON**  环境变量关联数组。
<span class="token punctuation">[</span>N<span class="token punctuation">]</span>  **ERRNO**  最后一个系统错误的描述。
<span class="token punctuation">[</span>G<span class="token punctuation">]</span>  **FIELDWIDTHS**  字段宽度列表（用空格键分隔）。
<span class="token punctuation">[</span>A<span class="token punctuation">]</span>  **FILENAME**  当前输入文件的名。
<span class="token punctuation">[</span>P<span class="token punctuation">]</span>  **FNR**  同NR，但相对于当前文件。
<span class="token punctuation">[</span>A<span class="token punctuation">]</span>  **FS**  字段分隔符（默认是任何空格）。
<span class="token punctuation">[</span>G<span class="token punctuation">]</span>  **IGNORECASE**  如果为真，则进行忽略大小写的匹配。
<span class="token punctuation">[</span>A<span class="token punctuation">]</span>  **NF**  表示字段数，在执行过程中对应于当前的字段数。
<span class="token punctuation">[</span>A<span class="token punctuation">]</span>  **NR**  表示记录数，在执行过程中对应于当前的行号。
<span class="token punctuation">[</span>A<span class="token punctuation">]</span>  **OFMT**  数字的输出格式（默认值是%.6g）。
<span class="token punctuation">[</span>A<span class="token punctuation">]</span>  **OFS**  输出字段分隔符（默认值是一个空格）。
<span class="token punctuation">[</span>A<span class="token punctuation">]</span>  **ORS**  输出记录分隔符（默认值是一个换行符）。
<span class="token punctuation">[</span>A<span class="token punctuation">]</span>  **RS**  记录分隔符（默认是一个换行符）。
<span class="token punctuation">[</span>N<span class="token punctuation">]</span>  **RSTART**  由match函数所匹配的字符串的第一个位置。
<span class="token punctuation">[</span>N<span class="token punctuation">]</span>  **RLENGTH**  由match函数所匹配的字符串的长度。
<span class="token punctuation">[</span>N<span class="token punctuation">]</span>  **SUBSEP**  数组下标分隔符（默认值是34）。
</code></pre></div><p>如：打印每一行最后匹配到的字段</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token builtin class-name">echo</span> -e <span class="token string">&quot;line1 f2 f3<span class="token entity" title="\n">\n</span> line2 f4 f5&quot;</span> <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'{print <span class="token variable">$NF</span>}'</span>
f3
f5
</code></pre></div><h3 id="awk-命令实战"><a href="#awk-命令实战" class="header-anchor">#</a> awk 命令实战</h3> <p>使用外部变量</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token assign-left variable">var1</span><span class="token operator">=</span><span class="token string">&quot;aaa&quot;</span>
<span class="token assign-left variable">var2</span><span class="token operator">=</span><span class="token string">&quot;bbb&quot;</span>
<span class="token builtin class-name">echo</span> <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'{ print v1,v2 }'</span> <span class="token assign-left variable">v1</span><span class="token operator">=</span><span class="token variable">$var1</span> <span class="token assign-left variable">v2</span><span class="token operator">=</span><span class="token variable">$var2</span>
</code></pre></div><p>使用条件运算符</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">awk</span> <span class="token string">'BEGIN{a=11;if(a &gt;= 9){print &quot;ok&quot;;}}'</span>
ok
</code></pre></div><p>打印偶数行数据</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">cat</span> text.txt
a
b
c
d
e

<span class="token function">awk</span> <span class="token string">'NR%2==1{next}{print NR,<span class="token variable">$0</span>;}'</span> text.txt
<span class="token number">2</span> b
<span class="token number">4</span> d
</code></pre></div><p>查找字符串，使用 index 内置函数</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">awk</span> <span class="token string">'BEGIN{info=&quot;this is a test2010test!&quot;;print index(info,&quot;test&quot;)?&quot;ok&quot;:&quot;no found&quot;;}'</span>
ok
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">awk 总结</p> <p>awk 提供了可编程的方法去操作文件，通过正则表达式、四则运算、条件判断、循环语句等多种方式去控制最终的输出；除此之外，awk 也有自己的生命周期 begin、print、end，让我们在操作文件时更加自如。</p></div> <h2 id="cut-命令"><a href="#cut-命令" class="header-anchor">#</a> cut 命令</h2> <p>cut 命令 用来显示行中的指定部分，删除文件中指定字段。cut 经常用来显示文件的内容。</p> <p>该命令有两项功能：</p> <ul><li>其一是用来显示文件的内容，它依次读取由参数 file 所指 明的文件，将它们的内容输出到标准输出上。</li> <li>其二是连接两个或多个文件，如 cut fl f2 &gt; f3 将把文件 fl 和 f2 的内容合并起来，然后通过输出重定向符“&gt;”的作用，将它们放入文件 f3 中。</li></ul> <p>语法</p> <div class="language-sh extra-class"><pre class="language-sh"><code>cut（选项）（参数）
</code></pre></div><p>选项</p> <div class="language-sh extra-class"><pre class="language-sh"><code>-b：仅显示行中指定直接范围的内容；
-c：仅显示行中指定范围的字符；
-d：指定字段的分隔符，默认的字段分隔符为“TAB”；
-f：显示指定字段的内容；
-n：与“-b”选项连用，不分割多字节字符；
--complement：补足被选择的字节、字符或字段；
--out-delimiter<span class="token operator">=</span> 字段分隔符：指定输出内容是的字段分割符；
--help：显示指令的帮助信息；
--version：显示指令的版本信息。
</code></pre></div><h3 id="cut-命令实战"><a href="#cut-命令实战" class="header-anchor">#</a> cut 命令实战</h3> <p>案例 1：有一个学生报表信息，包含 No、Name、Mark、Percent：</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token punctuation">[</span>root@localhost text<span class="token punctuation">]</span><span class="token comment"># cat test.txt</span>
No Name Mark Percent
01 tom <span class="token number">69</span> <span class="token number">91</span>
02 jack <span class="token number">71</span> <span class="token number">87</span>
03 alex <span class="token number">68</span> <span class="token number">98</span>
</code></pre></div><p>使用 -f 选项提取指定字段（这里的 f 参数可以简单记忆为 --fields 的缩写）：</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token punctuation">[</span>root@localhost text<span class="token punctuation">]</span><span class="token comment"># cut -f 1 test.txt</span>
No
01
02
03
<span class="token punctuation">[</span>root@localhost text<span class="token punctuation">]</span><span class="token comment"># cut -f2,3 test.txt</span>
Name Mark
tom <span class="token number">69</span>
jack <span class="token number">71</span>
alex <span class="token number">68</span>
</code></pre></div><p>案例 2：打印文件的前几列内容</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token punctuation">[</span>root@localhost text<span class="token punctuation">]</span><span class="token comment"># cat test.txt</span>
abcdefghijklmnopqrstuvwxyz
abcdefghijklmnopqrstuvwxyz
abcdefghijklmnopqrstuvwxyz
abcdefghijklmnopqrstuvwxyz
abcdefghijklmnopqrstuvwxyz
</code></pre></div><p>打印第 1 个到第 3 个字符</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token punctuation">[</span>root@localhost text<span class="token punctuation">]</span><span class="token comment"># cut -c1-3 test.txt</span>
abc
abc
abc
abc
abc
</code></pre></div><p>打印前 2 个字符</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token punctuation">[</span>root@localhost text<span class="token punctuation">]</span><span class="token comment"># cut -c-2 test.txt</span>
ab
ab
ab
ab
ab
</code></pre></div><p>打印从第 5 个字符开始到结尾</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token punctuation">[</span>root@localhost text<span class="token punctuation">]</span><span class="token comment"># cut -c5- test.txt</span>
efghijklmnopqrstuvwxyz
efghijklmnopqrstuvwxyz
efghijklmnopqrstuvwxyz
efghijklmnopqrstuvwxyz
efghijklmnopqrstuvwxyz
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">cut 命令总结</p> <p>cut 命令可以对当前文件的裁剪，也可以合并多个文件内容，但操作文件具有局限性，只能按列操作内容，功能没有 sed 和 awk 命令强大。</p></div> <h2 id="参考链接"><a href="#参考链接" class="header-anchor">#</a> 参考链接</h2> <ul><li><a href="https://wangchujiang.com/linux-command/c/sed.html" target="_blank" rel="noopener noreferrer">sed 命令<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://wangchujiang.com/linux-command/c/awk.html" target="_blank" rel="noopener noreferrer">awk 命令<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://wangchujiang.com/linux-command/c/cut.html" target="_blank" rel="noopener noreferrer">cut 命令<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <div class="gitalk-container"><div id="gitalk-container"></div></div></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.0803f1dc.js" defer></script><script src="/assets/js/2.ba121914.js" defer></script><script src="/assets/js/66.1d715382.js" defer></script><script src="/assets/js/3.acf85aa2.js" defer></script>
  </body>
</html>
