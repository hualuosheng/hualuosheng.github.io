(window.webpackJsonp=window.webpackJsonp||[]).push([[67],{316:function(s,t,a){"use strict";a.r(t);var e=a(28),n=Object(e.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"linux-免密登录配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#linux-免密登录配置"}},[s._v("#")]),s._v(" Linux 免密登录配置")]),s._v(" "),a("p",[s._v("这一节来实战一个免密登录，配置好之后，直接通过 "),a("code",[s._v("ssh + 服务器名")]),s._v("就能连接到远程计算机。")]),s._v(" "),a("ul",[a("li",[s._v("基本配置")]),s._v(" "),a("li",[s._v("进阶配置")])]),s._v(" "),a("h2",{attrs:{id:"基本配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#基本配置"}},[s._v("#")]),s._v(" 基本配置")]),s._v(" "),a("h3",{attrs:{id:"_1、生成密钥"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1、生成密钥"}},[s._v("#")]),s._v(" 1、生成密钥")]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" ~/.ssh/\nssh-keygen -t rsa -C "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"my_name"')]),s._v(" -f "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"my_key"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 这一步会生成 my_key.pub（公钥） my_key(私钥)")]),s._v("\n")])])]),a("h3",{attrs:{id:"_2、将公钥放在目标服务器上"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2、将公钥放在目标服务器上"}},[s._v("#")]),s._v(" 2、将公钥放在目标服务器上")]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("scp")]),s._v(" ./my_key.pub root@192.168.1.1:/root/.ssh/\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 这里使用 scp 命令远程复制公钥")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 注意要存放在登录用户所在目录的 .ssh 文件夹里，这里使用 root 用户登录，故存在 root 用户的用户目录。")]),s._v("\n")])])]),a("h3",{attrs:{id:"_3、将公钥存放进目标服务器-authorized-keys-里"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3、将公钥存放进目标服务器-authorized-keys-里"}},[s._v("#")]),s._v(" 3、将公钥存放进目标服务器 authorized_keys 里")]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" my_key.pub "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v(" authorized_keys\n")])])]),a("h3",{attrs:{id:"_4、5、使用免密登录"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4、5、使用免密登录"}},[s._v("#")]),s._v(" 4、5、使用免密登录")]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v(" -i ~/.ssh/my_key root@192.168.1.1\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -i 指定私钥的路径")]),s._v("\n")])])]),a("p",[s._v("基本配置已经完成了，但每一次连接都得手动指定本机的私钥地址，能不能省略这一步呢？")]),s._v(" "),a("h2",{attrs:{id:"进阶配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#进阶配置"}},[s._v("#")]),s._v(" 进阶配置")]),s._v(" "),a("p",[s._v("进阶配置中，我们要配置本地 .ssh 下的 config 文件，实现自动登录，而不需要手动指定私钥地址。")]),s._v(" "),a("h3",{attrs:{id:"_1、进入-config-文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1、进入-config-文件"}},[s._v("#")]),s._v(" 1、进入 config 文件")]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" ~/.ssh/\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" config\n")])])]),a("h3",{attrs:{id:"_2、编辑-config-文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2、编辑-config-文件"}},[s._v("#")]),s._v(" 2、编辑 config 文件")]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("User root\nHost aliyun\nHostName "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.1\nPort "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("22")]),s._v("\nStrictHostKeyChecking no\nIdentityFile ~/.ssh/my_key\nIdentitiesOnly "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("yes")]),s._v("\nProtocol "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\nCompression "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("yes")]),s._v("\nServerAliveInterval "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("60")]),s._v("\nServerAliveCountMax "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v("\nLogLevel INFO\n")])])]),a("h3",{attrs:{id:"_3、配置完成，体验一下吧"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3、配置完成，体验一下吧"}},[s._v("#")]),s._v(" 3、配置完成，体验一下吧")]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v(" aliyun\n")])])]),a("h3",{attrs:{id:"_4、配置多个服务器登录"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4、配置多个服务器登录"}},[s._v("#")]),s._v(" 4、配置多个服务器登录")]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("Host aliyun\n    User root\n    HostName "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.192")]),s._v(".192.22\n    Port "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("22")]),s._v("\n    StrictHostKeyChecking no\n    IdentityFile ~/.ssh/my_key\n    IdentitiesOnly "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("yes")]),s._v("\n    Protocol "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n    Compression "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("yes")]),s._v("\n    ServerAliveInterval "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("60")]),s._v("\n    ServerAliveCountMax "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v("\n    LogLevel INFO\n\nHost fanqiang\n    User root\n    HostName "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.192")]),s._v(".192.23\n    Port "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("22")]),s._v("\n    StrictHostKeyChecking no\n    IdentityFile ~/.ssh/my_key\n    IdentitiesOnly "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("yes")]),s._v("\n    Protocol "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n    Compression "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("yes")]),s._v("\n    ServerAliveInterval "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("60")]),s._v("\n    ServerAliveCountMax "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v("\n    LogLevel INFO\n")])])]),a("h3",{attrs:{id:"_5、使用免密登录"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5、使用免密登录"}},[s._v("#")]),s._v(" 5、使用免密登录")]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v(" aliyun\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v(" fanqiang\n")])])]),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("提示")]),s._v(" "),a("p",[s._v("文中的 ip 地址是为了演示，具体的 ip 需要根据服务器真实 ip 来定。")])]),s._v(" "),a("comment")],1)}),[],!1,null,null,null);t.default=n.exports}}]);